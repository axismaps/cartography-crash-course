<!DOCTYPE html>
<html>
  <head>
    <title>Cartography Crash Course</title>
    <meta charset="utf-8">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic|Merriweather:300,700,300italic' rel='stylesheet' type='text/css'>
    <style>

      body { font-family: 'Open Sans'; font-weight: 300;}
      h1, h2, h3 {
        font-weight: bold;
        text-transform: uppercase;
        color: black;
      }
      h2 {
        margin: 15px 0;
      }
      .remark-code, .remark-inline-code { font-family: monospace; font-size: 12px;}
      img {
        max-width: 100%;
        max-height: 100%;
      }
      .remark-slide-content{ color: #333; font-size: 18px; background-size: cover !important; padding: 20px 80px;}
      .remark-slide-content h1 {
          font-size: 72px;
      }
      .white, .white h1, .white h2, .white h3 {
        color: white;
        text-shadow: black 2px 2px 4px, #999 -1px -1px 1px;
      }
      .float-right{
        float: right;
        clear: both;
      }
      .caption, .citation {
        font: normal 14px/16px 'Open Sans';
        color: #999;
      }
      .bigger {
        font-size: 30px;
      }
      .remark-slide-number {
        font-size: 16px;
      }
      strong {
        color: black;
        font-weight: bold;
      }
      li {
        margin: 10px 0;
      }
      a {
        color: #F16F6F;
        text-decoration: underline;
      }
      a:hover{
        color: black;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Cartography crash course

Andy Woodruff and Mike Foster  
OpenVis 2016 Workshop

(url)

---
class: middle

## Hello

**Andy Woodruff**  
development lead at Axis Maps, board of directors of the North American Cartographic Information Society (NACIS), (something about blogs or whatever)  
[@awoodruff](http://twitter.com/awoodruff) | [andywoodruff.com](http://andywoodruff.com)

**Mike Foster**:  
TK  
[@mjfoster83](http://twitter.com/mjfoster83) | [mjfoster.net](http://www.mjfoster.net/)

We are also two of the three organizers for [Maptime Boston](http://maptimeboston.github.io)!

---
class: middle

## Overview

This is a cartographic crash course. Mastery of mapping takes a lot of learning—and a lot more than a few hours!

Today's goal is to provide a hands-on introduction to some common mapping concepts, data, and technologies, and to provide resources for further learning.

Many of these slides contain information that we won't spend much time on today. We're going to introduce some topics only briefly, leaving the slides as future reference.

---
class: bigger, middle

## At a glance

1. Core cartography concepts

2. Geographic data

4. Static (print) map workflows

4. Interactive (web) map workflows

---
class: center, middle

# What is a map?

Sounds like a silly question, but it's important to understand  
the **what** and **why** of maps.

---
class: bigger

## Textbook definition

.caption[(okay, wtf, none of my actual textbooks seem to give a definition)]

A map is a *representation* of a place.

It is some human's interpretation of the place. It reflects choices and biases of the mapmaker.
It does not and cannot represent _everything_ in the place. Things must be omitted, simplified, etc. for the map to make any sense.

---
class: bigger

## Types of maps

**Reference maps** emphasize the **location** of spatial phenomena, e.g. topographic maps or road maps.

**Thematic maps** emphasize the **spatial pattern** of geographic attributes, e.g. population density or income.

When making a thematic map in particular, it's important to understand the nature of the geographic phenomena being mapped.

---

class: middle, center

# Common types of thematic maps

(explain these briefly)

---
background-image: url(images/choropleth.png)
class: center, middle, white

# Choropleth

---

A **choropleth map** is a map in which **areas** are shaded by **color** to represent values. Choropleth maps are perhaps the most common and familiar type of thematic map, frequently seen for demographic or political data.

.float-right[![choropleth map](images/choropleth_example.jpg)]

- Good for data (ideally _abrupt_) aggregated to areal units such as states.

- Colors might be classed into discrete bins of data value ranges (more on that soon!) or unclassed and continuous.

- Rule #1: choropleth maps should not be used with projections that badly distort area.

- Rule #2: data values should be normalized, not simple counts. For example, _population per square mile_ is appropriate, while just _population_ is not.

More guidelines for choropleth maps: http://www.axismaps.com/guide/choropleth/

---

background-image: url(images/prop_symbol.jpg)
class: center, middle, white

# Proportional Symbols

---

On a **proportional symbol map**, symbols (such a circles) are scaled in proportion to the data they represent. Symbols might represent point data, but it is also common for proportional symbols to be used for area features.

.float-right[![proportional symbol map](images/prop_example.jpg)]

- These can be a good way around limitations of choropleth maps: they do not require an equal-area projection, and they do not require normalized data.

- Instead of sizes being directly proportional to value, sometimes symbols are **range-graded** (or **graduated**) in which case data values are binned into several discrete symbol sizes.

- Symbols should be correctly scaled by _area_, not radius. For example, if a circle is to be twice as big as another circle, its radius should be √2 larger than the other circle's, not twice as large. (Sometimes an additional perceptual scaling factor is applied to compensate for human weakness in estimating sizes.)

- Choose symbol size and map size carefully, or else proportional symbols can easily overwhelm a map.

More guidelines on proportional symbols: http://www.axismaps.com/guide/proportional_symbols/

---
class: center, middle, white
background-image: url(images/boston_dots_vote.jpg)

# Dot density

---

**Dot density maps** use points to represent counts of a geographic phenomenon. 

do dot maps of actual point locations fall under this, too? or is that more of a reference map?

---
class: center, middle, white
background-image: url(images/contour.jpg)

# Contours

---

**Contour** or **isarithmic** maps interpolate values between points

- you may be less likely to make one of these, but they're seen commonly enough

(not sure if this map type is really worth including here. included it initially just because it's listed as one of the main map types in the Slocum text)

---

(other common types?)

---

(show quick gallery of more map types)

---

class: center, middle

# Map design

---

## Map medium etc.

Static map: an image, either in print or on the web

Interactive map: usually web-based, on a computer, phone, etc.

… and things like size, environment in which map will be used

---

## When to map

Just because data *can* be mapped doesn't mean it *should* be mapped. Think about whether geography is important to your story. If not, consider other ways to visualize it, or simply provide a table.

http://www.ericson.net/content/2011/10/when-maps-shouldnt-be-maps/

---

## Visual variables

.float-right[![visual variables](images/visvars01.jpg)]
.float-right[.caption[[image source](http://go.owu.edu/~jbkrygie/krygier_html/geog_353/geog_353_lo/geog_353_lo08.html)]]

"The differences in map elements as perceived by the human eye" ([wiki.gis.com](http://wiki.gis.com/wiki/index.php/Visual_Variables)). No matter what the type of map, these are the fundamental ways in which visual symbols can be distinguished. 

[Jacques Bertin](https://en.wikipedia.org/wiki/Jacques_Bertin) proposed an original set in _Semiology of Graphics_ (1967):

- Position
- Size
- Shape
- Value (lightness)
- Color (hue)
- Orientation
- Texture

The list has been further expanded by other researches since.



---

## Color

Color is one of the more challenging design elements to perfect. It takes experience and a designer's eye to produce pleasing and effective color schemes, but there are also some guidlines to follow.

- Bear in mind certain cartographic conventions, such as blue for water and green for natural areas.
- Avoid red-green color schemes, as a significant population is colorblind and won't perceive these well.
- Keep an eye on how your color choices affect **figure-ground**, the appearance of things being in the foreground or background.
- .float-right[![color schemes](images/colorschemes.jpg)] For choropleth maps, use color ramps appropriate to the data. Is it **sequential** (ordered from low to high, e.g. population density), **diverging** (values above or below some break point, e.g. population change), or **qualitative** (having no natural order, e.g. race/ethnicity)?

More on color: http://www.axismaps.com/guide/color_schemes/, http://colorbrewer.org (click the "i" icons in each section)

---

## Data classification

Most choropleth maps (and some other types) divide data into a handful of bins (ideally 3–7). There are several [common classification schemes](http://wiki.gis.com/wiki/index.php/Classification) for dividing up data different ways—and they have a great impact on the map. The same data can result in radically different maps, depending on the classification scheme.

![](images/nelson_classification.jpg)  
.caption[[John Nelson, _Telling the Truth_](http://uxblog.idvsolutions.com/2011/10/telling-truth.html)]

---

## Scale and Generalization

Cartography is all about abstraction. It is not possible to show every detail, especially at small scale ("small scale" = zoomed out, "large scale" = zoomed in). Thus a map requires [generalization](http://www.gitta.info/Generalisati/en/html/index.html). Common generalization tasks include:

- Selection: choosing which objects to include on the map
- Simplification: reduce the number of vertices in an object
- Smoothing: reduce sharp angles to smoother curves
- Aggregation: group points into areas
- Amalgamation: group areas into larger areas
- Collapse: reduce a detailed object to a point symbol
- Merge: grouping of line features
- Refinement: select only portins of an object to display
- Exaggeration: amplify a part of an object (for clarity)
- Enhancement: add detail that visually elevates an object
- Displacement: separate objects (for clarity)

---

## Projection

This is a big topic. Read this:

http://mjfoster83.github.io/projections/index.html#/

Mike to do, a few things to keep in mind.

---

## Text

Two types
- labels
- prose

Let the graphic speak where it can

Considerations
- Audience
- Space
- Scale

Hierarchy

Font
- consistent fonts
- choose two, one serif one sans

Link

---

## Geographic phenomena

**Discrete phenomena** occur at distinct locations, e.g. indivudal people.  
**Continuous phenomena** occur all over a region, e.g. elevation.

**Abrupt phenomena** change suddenly, e.g. electoral votes per state.  
**Continuous phenomena** change gradually, e.g. temperature

![](images/abrupt_discrete.jpg)  
.caption[Alan MacEachren]

---

## Levels of measurement

Data produced from geographic phenomena may be **qualitative** (no numerical values) or **quantitative** (numerical values), or more specifically, one of four **levels of measurement**.

**Nominal:** categorical and non-ordered, e.g. official languages

**Ordinal:** ordered, but non-numerical, e.g. "Low", "Medium", and "High"

**Interval:** ordered, with understood numerical differences, but an arbitrary zero point, e.g. Farhenheit or Celsius temperature scales

**Ratio:** full-on numerical, with a non-arbitrary zero, e.g. population. (Ratio is the most common numerical data type.)

---


## Recap

...Getting this stuff right requires learning and experience. Look to the literature and to good examples.

---

## Recommended reading

http://www.axismaps.com/guide/

Making Maps, Krygier and Wood

Slocum

Online links...

(more links and books)

Seriously, get a textbook. There's no substitute for their thoroughness at the moment.

---
class: middle, center

# Geographic data

---

Here we'll focus on some common types and sources of geographic data. Fair warning, though: geographic data can be a mess. Getting your data into a mappable format is often half the job, if not more.

---

## Basics of geographic data

Most geographic data is one of two types:

- **Vector:** shapes (or _features_) defined by geometry. Points, lines, and areas.
- **Raster:** image data, defined by pixels, for example an elevation surface

(vector vs raster image would be good here)

And comprises two components

- **Location:** e.g., latitude and longitude, and/or vector geometry
- **Attributes:** information or numerical data about the feature

---
class: center, middle

# Data formats

---

Geographic data come in a lot of flavors. Some common formats include:

**Vector**
*data in points, lines, and polygons*

- Tabular, e.g. a CSV table of points
- Shapefile: the longtime standard, actually a collection of files. Clunky but still prevalent.
- GeoJSON: common for web maps. Easily consumed by javascript code.
- KML/KMZ: the google earth format
- GeoPDF: georeference PDF
- Databases: e.g., PostGIS

**Raster**
*data held in pixels*

- GeoTIFF
- DEM (Digital Elevation Model)

https://4326.us/maptime-data-formats/#/

---

## Let’s look at some data files

.bigger[[Shapefile](data/shp-example)]

![shapefile example](images/shp-example.jpg)

---

## Let’s look at some data files

.bigger[[GeoJSON](data/geojson-example.json)]

![geojson example](images/geojson-example.jpg)

---

## Let’s look at some data files

.bigger[[CSV](data/csv-example.txt)]

---

## Geocoding

With point data, if you're lucky it will have latitude and longitude information. Sometimes you only have addresses, though. Turning those addresses into lat/lon points requires a process called geocoding. (find some links to good geocoding services here)

---

# Data sources

---

## OpenStreetMap

Open, free, editable map of the world. The standard street map data source in the open source world.

(show short demo)

(data download links)

https://mapzen.com/data/metro-extracts/

note: use of OSM data requires attribution!

http://maptimeboston.github.io/osm-101/#0

---

## Natural Earth

Public domain cartographic reference data at several scales, created by expert cartographers.

http://www.naturalearthdata.com/

![](images/naturalearth.jpg)

Quick downloads of GeoJSON: http://geojson.xyz/

---

## Government data

[US Census TIGER/Line files](https://www.census.gov/cgi-bin/geo/shapefiles/index.php) are a good source of Census geographies (tracts, etc.) as well as other reference shapes. Some have basic demographic data attached, while others may require table joins to get data.

Many states, cities, or other local entities have GIS data repositories. In Massachusetts, we have [MassGIS](http://www.mass.gov/anf/research-and-tech/it-serv-and-support/application-serv/office-of-geographic-information-massgis/datalayers/layerlist.html), city GIS data (for example [Cambridge's](https://www.cambridgema.gov/GIS/gisdata)), and general open data sites like those of [Boston](https://data.cityofboston.gov/), [Cambridge](https://data.cambridgema.gov/), and [Somerville](https://data.somervillema.gov/).

(is there a good place to start for state/local gov't data? or just google it?)

---
class: bigger

## There's always Google!

Often, this is how you find what you're looking for:

"_[thing]_ shapefile"  
"_[thing]_ geojson"  
"_[thing]_ gis files"  

---

## Let’s get some data!

(Grab some NE base data, OSM roads, and something thematic)

---

## Working with data

Typical things we might want to do with data before the final map:

Clean it up

Calculate values (e.g. pop density)

Categorize, filter, etc.

Spatial operations (geoprocessing)

---

## Tools for working with data

Spreadsheets

Text editors (the power of find &amp; replace, and regex!)

Database tools and commands

GIS (we’ll get to this in a moment)

(links to some tools)

---

## Converting between data formats

Often needs to happen when preparing data for a web map.

Can use QGIS (demo coming up), or tools like mapshaper etc.

---

# Let’s make a map!

---

# A basic map workflow

1. Acquire data
2. Clean and edit data as necessary
3. Import data to GIS
4. Further geodata processing if needed
5. Symbolize data and lay out map including other elements
6. Export map to image, or vector format for further design work

---

# GIS

Geographic Information System

Wikipedia: “a system designed to capture, store, manipulate, analyze, manage, and present all types of spatial or geographical data.”

A lot of tools, sets of tools, or operations can fall under this umbrella; however “GIS” often refers to a single piece of software.

---

# GIS

[ArcGIS](http://desktop.arcgis.com/en/) by Esri has long reigned supreme as *the* GIS software. It’s powerful, and everywhere… but also expensive.

[QGIS](http://www.qgis.org/en/site/) is the open-source GIS software of choice. It’s growing more awesome every day and has an excellent community of users. This is what we’ll use to make a map today.

---

# Let’s do it!

We only have time for a brief look at a few of the features of QGIS. Today's purpose is to expose you to some of the core capabilities of QGIS, and to show you what GIS can do in general. Don't worry if you can't follow everything! A list of more in-depth resources and tutorials will follow.

---

(just demo things in the following sections; make slides for future reference)

---

# Data for our map

We're going to make a #ratmap! It will use data from the following places:

[Mapzen OSM metro extract of Boston](https://mapzen.com/data/metro-extracts/)

[Boston neighborhoods](https://data.cityofboston.gov/City-Services/Boston-Neighborhood-Shapefiles/af56-j7tb)  

[Boston open 311 requests](https://data.cityofboston.gov/City-Services/311-Service-Requests/awu8-dc52)

Or, you can download all data for this map at [link]

A QGIS project file for the final map is available at [link]

---

There's a lot going on in QGIS. But most of the time, for basic mapping, you'll likely only use a handful of core tools.

![QGIS UI](images/qgis_tools.png)

---

## Layers

Most maps in GIS are organized in terms of **layers**. Each layer represents a geographic data set (e.g., country outlines or city points), or some kind of annotation. Generally, they are shown in a list stacked in the same order as they are drawn on the map (i.e., bottom layer on the bottom, top layer on the top).

![GIS layers](images/layers.jpg)

---

## Importing data

Typical geographic data formats can be opened directly in QGIS, through the "Add Layer" menu or toolbar, or simply by dragging and dropping. QGIS [supports lots of data formats!](https://docs.qgis.org/2.2/en/docs/user_manual/working_with_vector/supported_data.html)

![add layer](images/addlayer.jpg)

Another common way to get data into a map is with a **table join**. In this case, you have a table of data belonging to geographic entities (e.g., states) but not the geographic shapes themselves. QGIS can join the table to a separate geodata file, as long as they both have some key field that matches. [Learn more about table joins here.](http://www.qgistutorials.com/en/docs/performing_table_joins.html)

---

## Visualizing Data

See your stuff.  
Make sure your file works.

---

## Projection

Projection is important! There are two types of project properties (_Project_ menu, _Project Properties..._) you're likely to deal with: **general properties** such as background color and units of measurements, and **CRS**.

CRS stands for _coordinate reference system_, and for practical purposes this is your map projection. Choose the projection to best fit your map extent! (need link)

![crs](images/crs.png)

---

## Attributes

Attributes are what drive a thematic map, and lot of time working in GIS is spent dealing with attributes in one way or another, be it [viewing the attribute table, selecting features based on attribute values](http://www.qgistutorials.com/en/docs/working_with_attributes.html), [identifying features on the map](http://docs.qgis.org/2.0/en/docs/user_manual/introduction/general_tools.html#identify), [calculating new attributes](https://docs.qgis.org/2.2/en/docs/user_manual/working_with_vector/field_calculator.html), or symbolizing features by attribute (up next).

![attributes](images/attributes.jpg)

---

## Symbolizing data

Data symbolization may be the biggest task of mapping in GIS. This is where you set styles, not only for representing attribute values but also for creating the look of your map. Styles can be applied layer-wide, or they can be set according to attribute values, with variable colors, widths, sizes, etc.

![style example](images/symbolize.png)

Styling vector layers is a big topic! [Start here](http://www.qgistutorials.com/en/docs/basic_vector_styling.html) for learning it in QGIS.

---

## Editing data

QGIS offers powerful [editing tools](https://docs.qgis.org/2.2/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html) for changing attributes, editing geometry, and adding or removing features. One common editing task is called _digitizing_: tracing new vector features from an exisitng source such as an image.

![editing](images/edit.png)

---

## Geoprocessing

Many advanced calculations and geometry operations are possible with GIS. For example, you might want to merge polygons together, or convert polygons to lines. In QGIS, look under the Vector menu, the [processing toolbox](http://docs.qgis.org/2.0/en/docs/user_manual/processing/toolbox.html), or in [plugins](http://www.qgistutorials.com/en/docs/using_plugins.html).

![](images/vectormenu.jpg)

---

## Map layout and export

Typically the final step in a cartographer's use of GIS is to lay out the map on a page along with elements such as titles, and export to an image or other format. In QGIS this is done with the [Print Composer](http://docs.qgis.org/2.0/en/docs/user_manual/print_composer/print_composer.html).

![](images/printcomposer.jpg)

Very nice maps can be made with QGIS alone, but most professional cartographers will refine further in a vector graphics program, such as Illustrator or the open-source alternative Inkscape.

---

# Recap

Rundown of what QGIS (GIS in general) can do

Typical steps in a map workflow

Links to learning resources

http://docs.qgis.org/2.8/en/docs/training_manual/index.html  
http://www.qgistutorials.com/en/docs/making_a_map.html  
http://duspviz.mit.edu/intro-to-qgis/#0 (or maptime, whichever is more up to date)  
http://giscommons.org/introduction-concepts/ or similar

---

# Also

List some other ways to make static maps

ArcGIS?  
R?  
Adobe Illustrator/MAPublisher?  
web tools like mapbox

---

# Web maps


---

## What is a web map?

We don’t mean simply a map on the web (which could include static images), but maps more powered by the web: interactive, code-driven, live data, animated, etc. etc.
It could be a reference map like Google, or a data-driven map (NYT etc.), or anything in between

https://github.com/maptimeBoston/web-maps-101

---

## When should a map be interactive?

The web makes it tempting to go bananas and throw everything into a map, with all kinds of interaction and data and everything. Avoid the temptation. Design carefully for your purpose, and think about what is gained by adding interaction. The map still needs to look good and have a good user experience. Especially bear this in mind if your users are only going to spend 15 seconds looking at the thing. The reader doesn't always _want_ to interact with a map.

[Why We Are Doing Fewer Interactives](https://github.com/archietse/malofiej-2016/blob/master/tse-malofiej-2016-slides.pdf) by Archie Tse, New York Times  
[Making maps, part 1: Less interactivity](http://blog.apps.chicagotribune.com/2011/03/08/making-maps-1/) by Brian Boyer

---

## Web map design considerations

Web maps are like static maps in many ways. All the same design considerations we discussed earlier are still relevant on the web. In addition to visual design, we need to think about the design of **interaction** and **user experience**.

- Is the user interface understandable?
- Is interaction comfortable and apparent to users?
- Does the map move? Animation can be confusing if not carefully designed.
- Does the map function smoothly? Don't push technology too far if it will crash browsers and melt phones.
- Is the map readable and usable on various media, from mobile devices to large desktop screens?

There is much more to say about web map design. (need awesome resource links here)

---

## Web map technology

Web mapping is a quickly evolving arena, technically. Your options will seem more diverse than the static GIS world, and often come with a steeper learning curve. But several companies do focus on products and services aimed at lowering the barrier of entry. Those comapnies are happy to guide you through easy web mapping with their products, and we will introduce some of them later.

First, though, let's take a look at how you can **build your own web map**! It's a good way to become familiar with some of the fundamental technology involved.

---

## Web map architecture

Most web maps will have at least two things: data and code. Sometimes that’s it, e.g. many NYT interactives.
Often, a third component: a basemap (define basemap here). Sometimes that basemap IS the only data, and sometimes there is data on top of it.

---

## Slippy map

A map that can be panned and zoomed (like Google Maps) is sometimes called a “slippy map” in the lingo. Most slippy maps are:

1. In the Mercator projection
2. Tiled (either as images or vector data)

![](images/mapquest_tiles2.png)

Learn more: [Web Maps 101](http://maptimeboston.github.io/web-maps-101/#0), [Anatomy of a Web Map](http://maptime.io/anatomy-of-a-web-map/)

---

## Building a custom slippy map

[Leaflet](http://leafletjs.com) is the most popular open-source javascript library. It is lightweight and easy to use, supporting basic map interactions, tiled map layers, and vector data layers (such as geojson data). It’s a good place to start a journey of custom web mapping.

(Demo a simple Leaflet map)

http://maptimeboston.github.io/leaflet-intro/

---

## Let’s make a web map!

This will be a simplified demo that provides a taste of a web mapping workflow. As always, it takes a lot of learning and work to really master web maps. Learning to code is of course a big part of that, if you’re not already a coder.

Fortunately, there are tons of resources and an amazing open mapping community to assist you in learning this stuff. (Many links to be provided shortly)

[Need some non-headache way to get people running local servers, or maybe there is some online sandbox?]

---

## Beginning at the end

Click to take a look at this [example of a simple web map](http://bl.ocks.org/awoodruff/2488ee1fdf0cf063904e). Notice how little code there is! It doesn't take much to get started with web maps, so don't be intimidated.

[![web map example](images/leaflet_example.jpg)](http://bl.ocks.org/awoodruff/2488ee1fdf0cf063904e)

---
class: bigger

## Anatomy of *this* web map:

- Our data
- A basemap
- html/js code

---

## Basic setup

The skeleton of a Leaflet web map is an HTML page, some extenral scripts, and some code of our own.

```html
<html>
<head>
  <title>A Leaflet map!</title>
  <!-- load some Leaflet scripts -->
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <style>
    #map{ width: 900px; height: 500px; }
  </style>
</head>
<body>

  <!-- the map will appear in this element -->
  <div id="map"></div>

  <script>

  // JavaScript code to initialize the map

  </script>
</body>
</html>
```
---

## We need a basemap!

Unlike a static map, where the extent of your base data is limited, on a web map it usually covers many scales and often vast areas. This means a LOT of data and design decisions. (For example see how you get more detail as you zoom into Google, and the designs change.) Therefore a making a basemap on your own can be a huge task. We’ll point out some resources and services for doing just that, but very often you’ll be using a pre-made (whether by you or by someone else) basemap.

There are [many, many basemaps](https://leaflet-extras.github.io/leaflet-providers/preview/) out there that you can use. The best bet is to go with one that's free to use and derived from OpenStreetMap data. You can't legally just grab basemaps from places like Google Maps!

![](images/tiles.jpg)

---

## Loading a basemap in Leaflet

Tiled basemaps have a URL template for each tile's zoom level and x/y coordinate. It typically looks like this:

`http://tiles.mapc.org/basemap/{z}/{x}/{y}.png`

Using that, setting up a simple slippy map is a breeze! Just initialize the map and plug in that tile URL. In this example we're using a basemap from [MAPC](http://www.mapc.org/).

```javascript
// initialize the map
var map = L.map('map').setView([42.35, -71.08], 13);

// load a tile layer
L.tileLayer('http://tiles.mapc.org/basemap/{z}/{x}/{y}.png',
{
  attribution: 'Tiles by <a href="http://mapc.org">MAPC</a>, Data by <a href="http://mass.gov/mgis">MassGIS</a>',
  maxZoom: 17,
  minZoom: 9
}).addTo(map);
```

Example: [basic Leaflet map with tiled basemap](http://bl.ocks.org/awoodruff/e9739a6719e0604eef58)

---

## Data

Cool, now we want our own data on top of the basemap. We'll use the #ratmap data as GeoJSON. Leaflet can load and display GeoJSON data very easily.

Remember the steps it took to get here? It's not an uncommon workflow:

1. Download CSV data from the Boston data site
2. Load CSV in QGIS
3. Filter data to include only Rodent Activity
4. Save filtered data as GeoJSON

---

## Loading data to leaflet

We use jQuery to help load the GeoJSON file, and then only one line of code to [display it](http://bl.ocks.org/awoodruff/1dc36a658a2e24e01b12)!

```html
<html>
<head>
  <title>A Leaflet map!</title>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <style>
    #map{ height: 100% }
  </style>
</head>
<body>

  <div id="map"></div>

  <script>

  // initialize the map
  var map = L.map('map').setView([42.35, -71.08], 13);

  // load a tile layer
  L.tileLayer('http://tiles.mapc.org/basemap/{z}/{x}/{y}.png',
    {
      attribution: 'Tiles by <a href="http://mapc.org">MAPC</a>, Data by <a href="http://mass.gov/mgis">MassGIS</a>',
      maxZoom: 17,
      minZoom: 9
    }).addTo(map);

  // load GeoJSON from an external file
  $.getJSON("rodents.geojson",function(data){
    // add GeoJSON layer to the map once the file is loaded
    L.geoJson(data).addTo(map);
  });

  </script>
</body>
</html>
```

---

## Customizing &amp; getting more advanced

We can use custom icons...

```javascript
// load GeoJSON from an external file
$.getJSON("rodents.geojson",function(data){
  var ratIcon = L.icon({
    iconUrl: 'http://andywoodruff.com/maptime-leaflet/rat.png',
    iconSize: [60,50]
  });
  L.geoJson(data,{
    pointToLayer: function(feature,latlng){
      return L.marker(latlng,{icon: ratIcon});
    }
  }).addTo(map);
});
```

And add popups...

```javascript
pointToLayer: function(feature,latlng){
  var marker = L.marker(latlng,{icon: ratIcon});
  marker.bindPopup(feature.properties.Location + '<br/>' + feature.properties.OPEN_DT);
  return marker;
}
```

---

## And beyond…

With more coding, you can do awesome things! Perhaps a [choropleth map](http://bl.ocks.org/awoodruff/3ce5d735126a56dfff94) or [clusters](http://bl.ocks.org/awoodruff/5de3553bb1f1b0c5f90d).

The beauty of something like Leaflet is that it provides a basic framework upon which you can build amazing maps with your own data, creatvity, and coding cleverness. The key to mastering web maps is not necessarily learning how to use specific libraries—that's often the easy part—but being comfortable with code in general and working with geographic data.


(list of more leaflet and/or map-ish js resources. in-depth stuff like DUSPviz)

---

## Additional options for web maps

- [**D3**](https://d3js.org/): very powerful JavaScript library for expressive data visualization, including many built-in mapping functions. It has a steeper learning curve, but is well-documented with many [examples](https://github.com/mbostock/d3/wiki/Gallery) and [tutorials](http://alignedleft.com/tutorials/d3) out there.

- [**Mapbox**](https://www.mapbox.com/) - A company on the cutting edge of web mapping, offering a whole platform and suite of tools. Especially good for designing and hosting global maps based on OpenStreetMap.

- [**CartoDB**](https://cartodb.com/) - Web-based tool for plugging your data into a map quickly and easily, but also with many powerful capabilities. We highly recommend this if you're looking for the most painless way of turning your data into a web map.

- OpenLayers

- Esri

---

## More web map resources

(links)

---

## (Web mapping summary)

---

## Summary of everything!

If possible to distill like 10 tips/thoughts/suggestions/tools/resources, that would be cool

---

## Learning more

Maptime!

And whatever

Remember to plug NACIS! And bring #stickers etc.

---

## links, links, links

List like a billion resource links here, including things mentioned in previous slides

---

## links

http://tolomaps.com/resources/

http://mapschool.io/

http://axismaps.github.io/thematic-cartography/

http://uxblog.idvsolutions.com/2013/10/20-unrequested-map-tips-part-1.html

http://uxblog.idvsolutions.com/2013/11/20-unrequested-map-tips-part-2.html

http://academy.cartodb.com/courses/design-for-beginners/

http://www.macwright.org/2015/03/23/geojson-second-bite.html

http://www.graphicarto.com/the-lost-art-of-critical-map-reading/

http://duspviz.mit.edu/

https://github.com/nvkelso/geo-how-to

https://www.mapbox.com/help/

http://maptimeboston.github.io/d3-maptime/#/

https://docs.google.com/document/d/1pjrX7F3w9X1987aAtSvR88aa_UM9YnMfxmr5qDUi6Pc/edit?usp=sharing

http://enipedia.tudelft.nl/wiki/Google_Refine_Tutorial

http://maptimeatx.github.io/intro-to-turf/

http://maptimeatx.github.io/cartodb-exercises/

https://github.com/maptime/hrva/blob/master/meetings.md

https://github.com/maptime/dc/wiki/Geodata-Sources

https://github.com/maptime/dc/wiki/CartoDB-Tutorial---February-23,-2016

https://github.com/pelias/pelias

http://esri.github.io/esri-leaflet/

https://github.com/Esri/geodev-hackerlabs/blob/gh-pages/develop/locate_query_leaflet.md

https://github.com/maptimedet/intro-web-mapping

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
        navigation: {
          scroll: false
        }
      });
    </script>
  </body>
</html>